# AI åä½œå¼€å‘æ—¥å¿—

## ğŸ“Œ å…³äºæœ¬æ–‡æ¡£

è¿™æ˜¯ä¸€ä»½ **AI åä½œå¼€å‘è®°å½•æ–‡æ¡£**ï¼Œç”¨äºåœ¨é•¿æœŸå¼€å‘è¿‡ç¨‹ä¸­ï¼š

### æ ¸å¿ƒä½œç”¨

1. **é¿å…é‡å¤ä»»åŠ¡** - è®°å½•å·²å®Œæˆçš„å·¥ä½œï¼Œé˜²æ­¢ AI é‡å¤å®ç°
2. **ä¿ç•™å…³é”®ä¸Šä¸‹æ–‡** - ä½œä¸º AI çš„é•¿æœŸç¼©ç•¥è®°å¿†ï¼Œå¿«é€Ÿæ¢å¤é¡¹ç›®ä¸Šä¸‹æ–‡
3. **è®°å½•è¸©å‘ç»éªŒ** - è®°å½•é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼Œé¿å…é‡è¹ˆè¦†è¾™

### ç”¨æˆ·è¦æ±‚

- **ç®€æ´ä¸ºä¸»** - åªè®°å½•å…³é”®ä¿¡æ¯ï¼Œä¸è¦è¿‡åº¦è¯¦ç»†
- **è¦ç‚¹å¯¼å‘** - ç”¨åˆ—è¡¨å½¢å¼çªå‡ºé‡ç‚¹ï¼Œé¿å…é•¿ç¯‡å¤§è®º
- **å®ç”¨è‡³ä¸Š** - é‡ç‚¹è®°å½•ï¼šå®Œæˆå†…å®¹ã€å…³é”®æ–‡ä»¶ã€è¸©å‘è®°å½•

### âš ï¸ æœ€é‡è¦ï¼šè®°å½•ç”¨æˆ·åå¥½

åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç‰¹åˆ«è®°å½•å’Œéµå¾ªç”¨æˆ·çš„**å¼€å‘ä¹ æƒ¯ã€æŠ€æœ¯åå¥½ã€è®¾è®¡é£æ ¼**ç­‰ï¼Œç¡®ä¿ AI èƒ½å¤ŸæŒ‰ç…§ç”¨æˆ·æœŸæœ›çš„æ–¹å¼å·¥ä½œã€‚

---

## 2025-12-20 - ç”¨æˆ·å’Œè§’è‰²ç®¡ç†åŠŸèƒ½

### å®Œæˆå†…å®¹

- âœ… åç«¯ï¼šç”¨æˆ·ç®¡ç†å®Œæ•´ CRUD (æ³¨å†Œ/ç™»å½•/ä¿®æ”¹å¯†ç /ç®¡ç†å‘˜æ“ä½œ)
- âœ… åç«¯ï¼šè§’è‰²ç®¡ç† CRUD + è§’è‰²ç©å®¶å…³è”ç®¡ç† (owner/shared å…³ç³»)
- âœ… å‰ç«¯ï¼šç”¨æˆ·ç®¡ç†é¡µé¢ (åˆ—è¡¨/æœç´¢/ç¼–è¾‘/åˆ é™¤)
- âœ… å‰ç«¯ï¼šè§’è‰²ç®¡ç†é¡µé¢ (åˆ—è¡¨/ç­›é€‰/åˆ›å»º/ç¼–è¾‘)
- âœ… ç®¡ç†åå°å¸ƒå±€ï¼šé¡¶éƒ¨å¯¼èˆª + ä¸»é¢˜åˆ‡æ¢ + ç”¨æˆ·å¡ç‰‡

### å…³é”®æ–‡ä»¶

- `backend/app/api/v2/{users,characters}.py`
- `backend/app/models/character.py` (CharacterPlayer å¤šå¯¹å¤šå…³è”)
- `frontend/src/pages/admin/{UserManagement,CharacterManagement}Page.jsx`
- `frontend/src/api/{users,characters}.js`

### æŠ€æœ¯è¦ç‚¹

- æƒé™æ§åˆ¶ï¼šç®¡ç†å‘˜ vs æ™®é€šç”¨æˆ·
- è½¯åˆ é™¤ï¼šç”¨æˆ·å’Œè§’è‰²å‡æ”¯æŒ
- åˆ†é¡µ + æ¨¡ç³Šæœç´¢
- SQLAlchemy `selectinload` é¢„åŠ è½½å…³è”

### è¸©å‘è®°å½•

âŒ **é—®é¢˜ 1**: `ResponseModel` å¯¼å…¥é”™è¯¯  
âœ… **è§£å†³**: åœ¨ `app/schemas/common.py` æ·»åŠ  `ResponseModel = Response` åˆ«å

âŒ **é—®é¢˜ 2**: Token éªŒè¯å­—æ®µä¸ä¸€è‡´  
âœ… **è§£å†³**: ç»Ÿä¸€ä½¿ç”¨ `type` å­—æ®µï¼ˆé `user_type`ï¼‰

---

## 2025-12-20 - ç®¡ç†å‘˜ç™»å½•è¯¯è·³ç”¨æˆ·é¡µä¿®å¤ä¸æ¸…ç†

### é—®é¢˜

- ç®¡ç†å‘˜ç™»å½•æˆåŠŸåè¢«é‡å®šå‘åˆ°æ™®é€šç”¨æˆ·é¡µé¢ã€‚

### æ ¹å› 

- `AdminDashboard` é¦–å±è°ƒç”¨ `setUser(data)` å°†å…¨å±€ `user` è¦†ç›–ä¸ºä¸å« `role` çš„å¯¹è±¡ï¼Œå¯¼è‡´ `ProtectedRoute` åˆ¤å®šä¸ºéç®¡ç†å‘˜ã€‚

### ä¿®å¤å†…å®¹

- `frontend/src/pages/AdminLoginPage.jsx`: ç™»å½•åç«‹å³ `setAuth(..., { role: 'admin' })`ï¼Œå¹¶åœ¨è¿›å…¥ `/admin/login` é¦–å±æ¸…ç†æ—§ä¼šè¯ï¼ˆé¿å…æ—§ä»¤ç‰Œå¹²æ‰°ï¼‰ã€‚
- `frontend/src/pages/AdminDashboard.jsx`: è¯»å– `resp.data` å¹¶ `setUser({ ...info, role: 'admin' })`ï¼Œé¿å…è§’è‰²ä¸¢å¤±ã€‚
- `frontend/src/components/ProtectedRoute.jsx`: æœªè®¤è¯è®¿é—®ç®¡ç†å‘˜è·¯ç”±æ—¶é‡å®šå‘åˆ° `/admin/login`ï¼ˆè€Œéæ™®é€šç™»å½•é¡µï¼‰ã€‚
- æ¸…ç†è°ƒè¯•æ—¥å¿—ï¼šç§»é™¤ `console.debug`/`groupCollapsed` ç­‰å¼€å‘æ—¥å¿—ï¼Œä¿ç•™ä¿®å¤é€»è¾‘ã€‚

### å½±å“èŒƒå›´

- ç®¡ç†å‘˜ç™»å½•ä¸å¯¼èˆªç¨³å®šæ€§æå‡ï¼›æ™®é€šç”¨æˆ·ä¸ä¼šè¿›å…¥ç®¡ç†å‘˜é¡µé¢ï¼›çŠ¶æ€æŒä¹…åŒ–ä¸å†å¯¼è‡´è¯¯åˆ¤ã€‚

### éªŒè¯

1. å‰ç«¯ï¼š`npm run dev` åè®¿é—® `/admin/login`ï¼Œä½¿ç”¨ `admin / 123456.` ç™»å½•ã€‚
2. è§‚å¯Ÿè¡Œä¸ºï¼šåœç•™åœ¨ `/admin`ï¼Œå¯æ­£å¸¸è®¿é—® `/admin/users` ç­‰å­è·¯ç”±ã€‚

---

## 2025-12-20 - Tailwind v4 Dark Mode ä¿®å¤

### é—®é¢˜

ä¸»é¢˜åˆ‡æ¢æ—¶å¡ç‰‡æ­£å¸¸ï¼Œä½†é¡µé¢èƒŒæ™¯æ¸å˜ä¸å“åº” `dark:` ç±»ã€‚

### åŸå› 

Tailwind v4 ä½¿ç”¨ CSS-first é…ç½®ï¼Œé»˜è®¤æœªå¯ç”¨ class-based dark modeã€‚

### è§£å†³æ–¹æ¡ˆ

åœ¨ `frontend/src/index.css` æ·»åŠ ï¼š

```css
@variant dark (&:where(.dark, .dark *));
```

### å…³é”®å·®å¼‚

- **Tailwind v3**: `tailwind.config.js` ä¸­é…ç½® `darkMode: 'class'`
- **Tailwind v4**: å¿…é¡»ç”¨ `@variant` æŒ‡ä»¤åœ¨ CSS ä¸­å®šä¹‰

---

## 2025-12-19 - UI ä¸»é¢˜ä¼˜åŒ–ï¼ˆç²‰è‰²å¯çˆ±é£æ ¼ï¼‰

### å®Œæˆå†…å®¹

- ç²‰è‰²ä¸»é¢˜é…è‰² (Primary: `#f31260`, Danger: `#DB3694`)
- å¼•å…¥ Aa å·åƒå¯çˆ±é•¿å¤§å­—ä½“ (`public/fonts/AaCute.woff`)
- SVG å›¾æ ‡ç³»ç»Ÿ (`components/icons.jsx`)
- æ¯›ç»ç’ƒæ•ˆæœ + æ¸å˜è®¾è®¡
- è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼
- ä¸»é¢˜åˆ‡æ¢ç»„ä»¶ (localStorage æŒä¹…åŒ–)

### å…³é”®æ–‡ä»¶

- `frontend/tailwind.config.js` - ç²‰è‰²ä¸»é¢˜é…ç½®
- `frontend/src/styles/fonts.css` - å­—ä½“é…ç½®
- `frontend/src/components/{icons,ThemeSwitch}.jsx`

---

## 2025-12-19 - å‰ç«¯åˆå§‹åŒ–

### æŠ€æœ¯æ ˆ

- React 18 + Vite 7
- HeroUI (NextUI v2)
- Tailwind CSS 4
- Zustand (çŠ¶æ€) + SWR (æ•°æ®)
- Axios + React Router v6

### ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ api/          # Axios å®¢æˆ·ç«¯ + API å°è£…
â”œâ”€â”€ components/   # å…¬å…±ç»„ä»¶
â”œâ”€â”€ layouts/      # AdminLayout
â”œâ”€â”€ pages/        # LoginPage, AdminDashboard
â”œâ”€â”€ stores/       # authStore (Zustand)
â””â”€â”€ utils/
```

### å…³é”®é…ç½®

- `.env` - å¼€å‘ç¯å¢ƒ `VITE_API_BASE_URL`
- `api/client.js` - Axios æ‹¦æˆªå™¨ï¼ˆè‡ªåŠ¨æ·»åŠ  Tokenï¼‰
- `components/ProtectedRoute.jsx` - è·¯ç”±å®ˆå«

---

## 2025-12-19 - åç«¯åˆå§‹åŒ–

### æŠ€æœ¯æ ˆ

- FastAPI 0.109 + SQLAlchemy 2.0 (å¼‚æ­¥)
- PostgreSQL 16 (å…±äº«å®¹å™¨)
- JWT (python-jose) + bcrypt 4.0.1

### æ•°æ®åº“

- æ•°æ®åº“ï¼š`yangpaibiao`
- ç”¨æˆ·ï¼š`yangpaibiao_user`
- åˆå§‹ç®¡ç†å‘˜ï¼š`admin` / `123456.`

### è¸©å‘è®°å½•

âŒ **é—®é¢˜ 1**: `sql/schema.sql` æœ‰ `is_primary` ç´¢å¼•ä½†å­—æ®µä¸å­˜åœ¨  
âœ… **è§£å†³**: åˆ é™¤è¯¥ç´¢å¼•è¯­å¥

âŒ **é—®é¢˜ 2**: bcrypt ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜  
âœ… **è§£å†³**: é™çº§åˆ° bcrypt 4.0.1

âŒ **é—®é¢˜ 3**: æ–‡ä»¶ç¼–ç é”™è¯¯  
âœ… **è§£å†³**: ä¿®å¤ `app/models/__init__.py` å’Œ `app/api/v2/__init__.py` ç¼–ç 

### API ç‰ˆæœ¬

æ‰€æœ‰æ¥å£åœ¨ `/api/v2` è·¯å¾„ï¼ŒSwagger UI: `http://localhost:9500/api/docs`

---

## 2025-12-20 - ç¾¤ç»„é€‰æ‹©ä¸åˆ‡æ¢åŠŸèƒ½ä¼˜åŒ–

### å®Œæˆå†…å®¹

- âœ… ç¾¤ç»„åˆ‡æ¢æ”¹ä¸ºçº¯å‰ç«¯æ“ä½œï¼ˆæ— éœ€ API è°ƒç”¨ï¼‰
- âœ… ç§»é™¤æ•°æ®ä¸­ä¸å­˜åœ¨çš„"é˜µè¥"å±æ€§æ˜¾ç¤º
- âœ… ç®€åŒ– GuildSwitcher ä¸­çš„åˆ‡æ¢ç¾¤ç»„éƒ¨åˆ†ï¼ˆä» DropdownSection æ”¹ä¸ºå•çº¯æŒ‰é’®ï¼‰
- âœ… ç¾¤ç»„å¡ç‰‡å’Œè¯¦æƒ…å¼¹çª— UI æ¸…ç†

### å…³é”®æ–‡ä»¶

- `frontend/src/components/user/GuildSwitcher.jsx` - ç®€åŒ–åˆ‡æ¢ç•Œé¢
- `frontend/src/pages/user/GuildHubPage.jsx` - ç§»é™¤é˜µè¥å­—æ®µ
- `frontend/src/components/user/GuildInfoModal.jsx` - ç§»é™¤é˜µè¥è¯¦æƒ…

### æŠ€æœ¯è¦ç‚¹

- ç¾¤ç»„åˆ‡æ¢æµç¨‹ï¼šæ›´æ–° localStorage + authStore + é¡µé¢åˆ·æ–°
- å‰åç«¯åˆ†ç¦»åŸåˆ™ï¼šé€‰æ‹©ç¾¤ç»„æ˜¯çº¯å‰ç«¯çŠ¶æ€æ“ä½œï¼Œä¸æ¶‰åŠæœåŠ¡ç«¯è®°å½•

### æ¶æ„å†³ç­–

- æœåŠ¡ç«¯ä¸è®°å½•"å½“å‰é€‰æ‹©çš„ç¾¤ç»„"çŠ¶æ€ï¼Œå…¨éƒ¨ç”±å®¢æˆ·ç«¯ localStorage ç®¡ç†
- åˆ‡æ¢ç¾¤ç»„åªéœ€æ›´æ–° `selectedGuildId` å’Œ `currentGuildId`ï¼Œç„¶ååˆ·æ–°è·å–æ–°æƒé™

---

## ç”¨æˆ·ä¹ æƒ¯è®°å½•

- **æ•°æ®åº“**: ä½¿ç”¨å…±äº« PostgreSQL å®¹å™¨ `shared-postgres`
- **ç«¯å£**: åç«¯ 9500, å‰ç«¯ 5173
- **å–œå¥½**: ç²‰è‰²å¯çˆ±é£æ ¼ UI, æ¯›ç»ç’ƒæ•ˆæœ, æ¸å˜è®¾è®¡
- **å·¥ä½œæ–¹å¼**: å‰åç«¯åˆ†ç¦», FastAPI + React, æ³¨é‡ä»£ç è§„èŒƒ

---

## å¾…åŠäº‹é¡¹

- [ ] å®ç°ç¾¤ç»„ç®¡ç†åŠŸèƒ½
- [ ] å®ç°å¼€å›¢ç³»ç»Ÿ
- [ ] æ·»åŠ è§’è‰²è¯¦æƒ…é¡µé¢
- [ ] ä¼˜åŒ–ç§»åŠ¨ç«¯å“åº”å¼
- [ ] æ·»åŠ æ•°æ®ç»Ÿè®¡å›¾è¡¨

---
