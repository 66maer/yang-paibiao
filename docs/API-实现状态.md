# API å®ç°çŠ¶æ€æ–‡æ¡£

**æœ€åæ›´æ–°**: 2025-12-20  
**åŸºç¡€ URL**: `/api/v2`

å…³äº API çš„è¯¦ç»†è®¾è®¡ä¿¡æ¯ï¼Œè¯·å‚è€ƒ [api-design.md](./api-design.md)ã€‚

---

## çŠ¶æ€æ ‡è®°è¯´æ˜

- âœ… **å·²å®ç°**ï¼šè¯¥æ¥å£å·²åœ¨åç«¯å®Œæ•´å®ç°
- ğŸš§ **éƒ¨åˆ†å®ç°**ï¼šè¯¥æ¥å£åœ¨åç«¯æœ‰éƒ¨åˆ†å®ç°ï¼Œä½†å¯èƒ½ä¸è®¾è®¡æœ‰ç»†å¾®å·®å¼‚
- âŒ **æœªå®ç°**ï¼šè¯¥æ¥å£è®¾è®¡å·²åˆ—å‡ºï¼Œä½†åç«¯å°šæœªå®ç°
- ğŸ”„ **å¾…ä¼˜åŒ–**ï¼šè¯¥æ¥å£å·²å®ç°ä½†å¯èƒ½éœ€è¦è°ƒæ•´

---

## ğŸ“Š å®ç°è¿›åº¦ç»Ÿè®¡

| æ¨¡å—                    | æ€»æ•°   | å·²å®ç° | éƒ¨åˆ†å®ç° | æœªå®ç° | è¿›åº¦       |
| ----------------------- | ------ | ------ | -------- | ------ | ---------- |
| 1. ç”¨æˆ·è®¤è¯             | 5      | 5      | 0        | 0      | ğŸŸ¢ 100%    |
| 2. ç®¡ç†å‘˜è®¤è¯           | 3      | 3      | 0        | 0      | ğŸŸ¢ 100%    |
| 3. ç®¡ç†å‘˜ç®¡ç†           | 4      | 0      | 0        | 4      | ğŸ”´ 0%      |
| 4. ç”¨æˆ·ç®¡ç†             | 9      | 9      | 0        | 0      | ğŸŸ¢ 100%    |
| 5. ç¾¤ç»„ç®¡ç†ï¼ˆç³»ç»Ÿç®¡ç†ï¼‰ | 6      | 6      | 0        | 0      | ğŸŸ¢ 100%    |
| 6. è®¢é˜…ç®¡ç†             | 5      | 5      | 0        | 0      | ğŸŸ¢ 100%    |
| 7. è§’è‰²ç®¡ç†             | 8      | 8      | 0        | 0      | ğŸŸ¢ 100%    |
| 8. ç¾¤ç»„ä¿¡æ¯ç®¡ç†         | 3      | 0      | 0        | 3      | ğŸ”´ 0%      |
| 9. ç¾¤ç»„æˆå‘˜ç®¡ç†         | 6      | 1      | 0        | 5      | ğŸ”´ 17%     |
| 10. å¼€å›¢ç®¡ç†            | 6      | 0      | 0        | 6      | ğŸ”´ 0%      |
| 11. å¼€å›¢æ¨¡æ¿            | 4      | 0      | 0        | 4      | ğŸ”´ 0%      |
| 12. æŠ¥åç®¡ç†            | 6      | 0      | 0        | 6      | ğŸ”´ 0%      |
| 13. é‡‘å›¢è®°å½•            | 6      | 0      | 0        | 6      | ğŸ”´ 0%      |
| **æ€»è®¡**                | **72** | **47** | **0**    | **25** | **ğŸŸ¡ 65%** |

---

## ğŸ“‹ è¯¦ç»†æ¥å£æ¸…å•

### 1ï¸âƒ£ ç”¨æˆ·è®¤è¯æ¥å£ (`/auth`)

| æ¥å£             | æ–¹æ³• | è·¯å¾„             | çŠ¶æ€ | å¤‡æ³¨   |
| ---------------- | ---- | ---------------- | ---- | ------ |
| ç”¨æˆ·æ³¨å†Œ         | POST | `/auth/register` | âœ…   | å·²å®ç° |
| ç”¨æˆ·ç™»å½•         | POST | `/auth/login`    | âœ…   | å·²å®ç° |
| åˆ·æ–°ä»¤ç‰Œ         | POST | `/auth/refresh`  | âœ…   | å·²å®ç° |
| ç™»å‡º             | POST | `/auth/logout`   | âœ…   | å·²å®ç° |
| è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ | GET  | `/auth/me`       | âœ…   | å·²å®ç° |

### 2ï¸âƒ£ ç®¡ç†å‘˜è®¤è¯æ¥å£ (`/admin/auth`)

| æ¥å£           | æ–¹æ³• | è·¯å¾„                 | çŠ¶æ€ | å¤‡æ³¨   |
| -------------- | ---- | -------------------- | ---- | ------ |
| ç®¡ç†å‘˜ç™»å½•     | POST | `/admin/auth/login`  | âœ…   | å·²å®ç° |
| ç®¡ç†å‘˜ç™»å‡º     | POST | `/admin/auth/logout` | âœ…   | å·²å®ç° |
| è·å–ç®¡ç†å‘˜ä¿¡æ¯ | GET  | `/admin/auth/me`     | âœ…   | å·²å®ç° |

### 3ï¸âƒ£ ç®¡ç†å‘˜ç®¡ç†æ¥å£ (`/admin/admins`)

| æ¥å£           | æ–¹æ³•   | è·¯å¾„                                | çŠ¶æ€ | å¤‡æ³¨   |
| -------------- | ------ | ----------------------------------- | ---- | ------ |
| åˆ›å»ºç®¡ç†å‘˜     | POST   | `/admin/admins`                     | âŒ   | æœªå®ç° |
| è·å–ç®¡ç†å‘˜åˆ—è¡¨ | GET    | `/admin/admins`                     | âŒ   | æœªå®ç° |
| ä¿®æ”¹ç®¡ç†å‘˜å¯†ç  | PUT    | `/admin/admins/{admin_id}/password` | âŒ   | æœªå®ç° |
| åˆ é™¤ç®¡ç†å‘˜     | DELETE | `/admin/admins/{admin_id}`          | âŒ   | æœªå®ç° |

### 4ï¸âƒ£ ç”¨æˆ·ç®¡ç†æ¥å£ (`/users`)

| æ¥å£                   | æ–¹æ³•   | è·¯å¾„                              | çŠ¶æ€ | å¤‡æ³¨   |
| ---------------------- | ------ | --------------------------------- | ---- | ------ |
| è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯       | GET    | `/users/me`                       | âœ…   | å·²å®ç° |
| æ›´æ–°ç”¨æˆ·ä¿¡æ¯           | PUT    | `/users/me`                       | âœ…   | å·²å®ç° |
| ä¿®æ”¹å¯†ç                | PUT    | `/users/me/password`              | âœ…   | å·²å®ç° |
| è·å–ç”¨æˆ·çš„ç¾¤ç»„åˆ—è¡¨     | GET    | `/users/me/guilds`                | âœ…   | å·²å®ç° |
| è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆç®¡ç†å‘˜ï¼‰ | GET    | `/users`                          | âœ…   | å·²å®ç° |
| è·å–ç”¨æˆ·è¯¦æƒ…ï¼ˆç®¡ç†å‘˜ï¼‰ | GET    | `/users/{user_id}`                | âœ…   | å·²å®ç° |
| ç¼–è¾‘ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰     | PUT    | `/users/{user_id}`                | âœ…   | å·²å®ç° |
| åˆ é™¤ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰     | DELETE | `/users/{user_id}`                | âœ…   | å·²å®ç° |
| é‡ç½®ç”¨æˆ·å¯†ç ï¼ˆç®¡ç†å‘˜ï¼‰ | POST   | `/users/{user_id}/reset-password` | âœ…   | å·²å®ç° |

### 5ï¸âƒ£ ç¾¤ç»„ç®¡ç†æ¥å£ (`/admin/guilds`)

| æ¥å£             | æ–¹æ³•   | è·¯å¾„                                | çŠ¶æ€ | å¤‡æ³¨   |
| ---------------- | ------ | ----------------------------------- | ---- | ------ |
| åˆ›å»ºç¾¤ç»„         | POST   | `/admin/guilds`                     | âœ…   | å·²å®ç° |
| è·å–æ‰€æœ‰ç¾¤ç»„åˆ—è¡¨ | GET    | `/admin/guilds`                     | âœ…   | å·²å®ç° |
| è·å–ç¾¤ç»„è¯¦æƒ…     | GET    | `/admin/guilds/{guild_id}`          | âœ…   | å·²å®ç° |
| æ›´æ–°ç¾¤ç»„ä¿¡æ¯     | PUT    | `/admin/guilds/{guild_id}`          | âœ…   | å·²å®ç° |
| è½¬è®©ç¾¤ä¸»         | POST   | `/admin/guilds/{guild_id}/transfer` | âœ…   | å·²å®ç° |
| åˆ é™¤ç¾¤ç»„         | DELETE | `/admin/guilds/{guild_id}`          | âœ…   | å·²å®ç° |

### 6ï¸âƒ£ è®¢é˜…ç®¡ç†æ¥å£ (`/admin/subscriptions`)

| æ¥å£             | æ–¹æ³•   | è·¯å¾„                                     | çŠ¶æ€ | å¤‡æ³¨   |
| ---------------- | ------ | ---------------------------------------- | ---- | ------ |
| æ–°å¢è®¢é˜…ï¼ˆç»­è´¹ï¼‰ | POST   | `/admin/subscriptions`                   | âœ…   | å·²å®ç° |
| è·å–è®¢é˜…åˆ—è¡¨     | GET    | `/admin/subscriptions`                   | âœ…   | å·²å®ç° |
| è·å–ç¾¤ç»„è®¢é˜…å†å² | GET    | `/admin/guilds/{guild_id}/subscriptions` | âœ…   | å·²å®ç° |
| æ›´æ–°è®¢é˜…         | PUT    | `/admin/subscriptions/{subscription_id}` | âœ…   | å·²å®ç° |
| åˆ é™¤è®¢é˜…         | DELETE | `/admin/subscriptions/{subscription_id}` | âœ…   | å·²å®ç° |

### 7ï¸âƒ£ è§’è‰²ç®¡ç†æ¥å£ (`/characters`)

| æ¥å£                       | æ–¹æ³•   | è·¯å¾„                                           | çŠ¶æ€ | å¤‡æ³¨   |
| -------------------------- | ------ | ---------------------------------------------- | ---- | ------ |
| æ·»åŠ è§’è‰²åˆ°æˆ‘çš„è´¦å·         | POST   | `/characters`                                  | âœ…   | å·²å®ç° |
| è·å–æˆ‘çš„è§’è‰²åˆ—è¡¨           | GET    | `/characters/my`                               | âœ…   | å·²å®ç° |
| è·å–è§’è‰²è¯¦æƒ…               | GET    | `/characters/{character_id}`                   | âœ…   | å·²å®ç° |
| æ›´æ–°è§’è‰²åŸºæœ¬ä¿¡æ¯           | PUT    | `/characters/{character_id}`                   | âœ…   | å·²å®ç° |
| åˆ é™¤è§’è‰²å…³è”               | DELETE | `/characters/{character_id}`                   | âœ…   | å·²å®ç° |
| è·å–æ‰€æœ‰è§’è‰²åˆ—è¡¨ï¼ˆç®¡ç†å‘˜ï¼‰ | GET    | `/characters`                                  | âœ…   | å·²å®ç° |
| æ·»åŠ ç©å®¶å…³è”ï¼ˆç®¡ç†å‘˜ï¼‰     | POST   | `/characters/{character_id}/players`           | âœ…   | å·²å®ç° |
| ç§»é™¤ç©å®¶å…³è”ï¼ˆç®¡ç†å‘˜ï¼‰     | DELETE | `/characters/{character_id}/players/{user_id}` | âœ…   | å·²å®ç° |

### 8ï¸âƒ£ ç¾¤ç»„ä¿¡æ¯ç®¡ç†æ¥å£ (`/guilds`)

| æ¥å£               | æ–¹æ³• | è·¯å¾„                     | çŠ¶æ€ | å¤‡æ³¨   |
| ------------------ | ---- | ------------------------ | ---- | ------ |
| è·å–ç¾¤ç»„è¯¦æƒ…       | GET  | `/guilds/{guild_id}`     | âŒ   | æœªå®ç° |
| é€šè¿‡ ukey è·å–ç¾¤ç»„ | GET  | `/guilds/by-ukey/{ukey}` | âŒ   | æœªå®ç° |
| æ›´æ–°ç¾¤ç»„é…ç½®       | PUT  | `/guilds/{guild_id}`     | âŒ   | æœªå®ç° |

### 9ï¸âƒ£ ç¾¤ç»„æˆå‘˜ç®¡ç†æ¥å£ (`/guilds/{guild_id}/members`)

| æ¥å£         | æ–¹æ³•   | è·¯å¾„                                        | çŠ¶æ€ | å¤‡æ³¨   |
| ------------ | ------ | ------------------------------------------- | ---- | ------ |
| åŠ å…¥ç¾¤ç»„     | POST   | `/guilds/{guild_id}/members`                | âŒ   | æœªå®ç° |
| è·å–æˆå‘˜åˆ—è¡¨ | GET    | `/guilds/{guild_id}/members`                | âŒ   | æœªå®ç° |
| æ›´æ–°æˆå‘˜è§’è‰² | PUT    | `/guilds/{guild_id}/members/{user_id}/role` | âŒ   | æœªå®ç° |
| æ›´æ–°ç¾¤å†…æ˜µç§° | PUT    | `/guilds/{guild_id}/members/me/nickname`    | âœ…   | å·²å®ç° |
| ç§»é™¤æˆå‘˜     | DELETE | `/guilds/{guild_id}/members/{user_id}`      | âŒ   | æœªå®ç° |
| é€€å‡ºç¾¤ç»„     | DELETE | `/guilds/{guild_id}/members/me`             | âŒ   | æœªå®ç° |

### ğŸ”Ÿ å¼€å›¢ç®¡ç†æ¥å£ (`/guilds/{guild_id}/teams`)

| æ¥å£         | æ–¹æ³•   | è·¯å¾„                                       | çŠ¶æ€ | å¤‡æ³¨   |
| ------------ | ------ | ------------------------------------------ | ---- | ------ |
| åˆ›å»ºå¼€å›¢     | POST   | `/guilds/{guild_id}/teams`                 | âŒ   | æœªå®ç° |
| è·å–å¼€å›¢åˆ—è¡¨ | GET    | `/guilds/{guild_id}/teams`                 | âŒ   | æœªå®ç° |
| è·å–å¼€å›¢è¯¦æƒ… | GET    | `/guilds/{guild_id}/teams/{team_id}`       | âŒ   | æœªå®ç° |
| æ›´æ–°å¼€å›¢ä¿¡æ¯ | PUT    | `/guilds/{guild_id}/teams/{team_id}`       | âŒ   | æœªå®ç° |
| å…³é—­å¼€å›¢     | POST   | `/guilds/{guild_id}/teams/{team_id}/close` | âŒ   | æœªå®ç° |
| åˆ é™¤å¼€å›¢     | DELETE | `/guilds/{guild_id}/teams/{team_id}`       | âŒ   | æœªå®ç° |

### 1ï¸âƒ£1ï¸âƒ£ å¼€å›¢æ¨¡æ¿æ¥å£ (`/guilds/{guild_id}/templates`)

| æ¥å£         | æ–¹æ³•   | è·¯å¾„                                         | çŠ¶æ€ | å¤‡æ³¨   |
| ------------ | ------ | -------------------------------------------- | ---- | ------ |
| åˆ›å»ºæ¨¡æ¿     | POST   | `/guilds/{guild_id}/templates`               | âŒ   | æœªå®ç° |
| è·å–æ¨¡æ¿åˆ—è¡¨ | GET    | `/guilds/{guild_id}/templates`               | âŒ   | æœªå®ç° |
| æ›´æ–°æ¨¡æ¿     | PUT    | `/guilds/{guild_id}/templates/{template_id}` | âŒ   | æœªå®ç° |
| åˆ é™¤æ¨¡æ¿     | DELETE | `/guilds/{guild_id}/templates/{template_id}` | âŒ   | æœªå®ç° |

### 1ï¸âƒ£2ï¸âƒ£ æŠ¥åç®¡ç†æ¥å£ (`/guilds/{guild_id}/teams/{team_id}/signups`)

| æ¥å£                   | æ–¹æ³•   | è·¯å¾„                                                            | çŠ¶æ€ | å¤‡æ³¨   |
| ---------------------- | ------ | --------------------------------------------------------------- | ---- | ------ |
| æäº¤æŠ¥å               | POST   | `/guilds/{guild_id}/teams/{team_id}/signups`                    | âŒ   | æœªå®ç° |
| è·å–æŠ¥ååˆ—è¡¨ï¼ˆå«å†å²ï¼‰ | GET    | `/guilds/{guild_id}/teams/{team_id}/signups`                    | âŒ   | æœªå®ç° |
| æ›´æ–°æŠ¥åä¿¡æ¯           | PUT    | `/guilds/{guild_id}/teams/{team_id}/signups/{signup_id}`        | âŒ   | æœªå®ç° |
| é”å®šæŠ¥åä½ç½®           | POST   | `/guilds/{guild_id}/teams/{team_id}/signups/{signup_id}/lock`   | âŒ   | æœªå®ç° |
| æ ‡è®°ç¼ºå¸­               | POST   | `/guilds/{guild_id}/teams/{team_id}/signups/{signup_id}/absent` | âŒ   | æœªå®ç° |
| å–æ¶ˆæŠ¥å               | DELETE | `/guilds/{guild_id}/teams/{team_id}/signups/{signup_id}`        | âŒ   | æœªå®ç° |

### 1ï¸âƒ£3ï¸âƒ£ é‡‘å›¢è®°å½•æ¥å£ (`/guilds/{guild_id}/gold-records`)

| æ¥å£                     | æ–¹æ³•   | è·¯å¾„                                             | çŠ¶æ€ | å¤‡æ³¨   |
| ------------------------ | ------ | ------------------------------------------------ | ---- | ------ |
| åˆ›å»ºé‡‘å›¢è®°å½•             | POST   | `/guilds/{guild_id}/gold-records`                | âŒ   | æœªå®ç° |
| è·å–é‡‘å›¢è®°å½•åˆ—è¡¨         | GET    | `/guilds/{guild_id}/gold-records`                | âŒ   | æœªå®ç° |
| è·å–é‡‘å›¢è®°å½•è¯¦æƒ…         | GET    | `/guilds/{guild_id}/gold-records/{record_id}`    | âŒ   | æœªå®ç° |
| æ›´æ–°é‡‘å›¢è®°å½•             | PUT    | `/guilds/{guild_id}/gold-records/{record_id}`    | âŒ   | æœªå®ç° |
| åˆ é™¤é‡‘å›¢è®°å½•             | DELETE | `/guilds/{guild_id}/gold-records/{record_id}`    | âŒ   | æœªå®ç° |
| é€šè¿‡å¼€å›¢ ID è·å–é‡‘å›¢è®°å½• | GET    | `/guilds/{guild_id}/teams/{team_id}/gold-record` | âŒ   | æœªå®ç° |

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [API è®¾è®¡æ–‡æ¡£](./api-design.md) - å®Œæ•´çš„ API è®¾è®¡è§„èŒƒ
- [åç«¯ä»£ç ](../backend/app/api/v2/) - å®ç°æºä»£ç 
