{
  "swagger": "2.0",
  "info": {
    "title": "xiaoyang api docs",
    "version": "2.0"
  },
  "tags": [
    {
      "name": "GuildService"
    },
    {
      "name": "UserService"
    }
  ],
  "host": "localhost:8080",
  "schemes": [
    "http",
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/v1/auth/login": {
      "post": {
        "summary": "登录",
        "description": "登录",
        "operationId": "UserService_Login",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1LoginResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1LoginRequest"
            }
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "summary": "登出",
        "description": "登出",
        "operationId": "UserService_Logout",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1LogoutResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1LogoutRequest"
            }
          }
        ],
        "tags": [
          "UserService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/auth/register": {
      "post": {
        "summary": "注册",
        "description": "注册",
        "operationId": "UserService_Register",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1RegisterResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1RegisterRequest"
            }
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/api/v1/guild/addGuildMember": {
      "post": {
        "summary": "添加成员",
        "description": "添加用户到群组",
        "operationId": "GuildService_AddGuildMember",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1AddGuildMemberResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1AddGuildMemberRequest"
            }
          }
        ],
        "tags": [
          "GuildService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/guild/createGuild": {
      "post": {
        "summary": "创建群组",
        "description": "创建新群组",
        "operationId": "GuildService_CreateGuild",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1CreateGuildResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1CreateGuildRequest"
            }
          }
        ],
        "tags": [
          "GuildService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/guild/deleteGuild": {
      "post": {
        "summary": "删除群组",
        "description": "根据ukey删除群组",
        "operationId": "GuildService_DeleteGuild",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1DeleteGuildResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1DeleteGuildRequest"
            }
          }
        ],
        "tags": [
          "GuildService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/guild/getGuildInfo": {
      "post": {
        "summary": "获取群组详情",
        "description": "根据ukey获取群组详细信息",
        "operationId": "GuildService_GetGuildInfo",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetGuildInfoResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1GetGuildInfoRequest"
            }
          }
        ],
        "tags": [
          "GuildService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/guild/getGuildMember": {
      "post": {
        "summary": "查询成员信息",
        "description": "根据用户ID和群组ukey查询成员详情",
        "operationId": "GuildService_GetGuildMember",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetGuildMemberResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1GetGuildMemberRequest"
            }
          }
        ],
        "tags": [
          "GuildService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/guild/listAllGuilds": {
      "post": {
        "summary": "获取所有群组",
        "description": "获取平台全部群组信息",
        "operationId": "GuildService_ListAllGuilds",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ListAllGuildsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1ListAllGuildsRequest"
            }
          }
        ],
        "tags": [
          "GuildService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/guild/listGuildMembers": {
      "post": {
        "summary": "获取群组成员",
        "description": "根据ukey获取群组全部成员信息",
        "operationId": "GuildService_ListGuildMembers",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ListGuildMembersResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1ListGuildMembersRequest"
            }
          }
        ],
        "tags": [
          "GuildService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/guild/listUserGuilds": {
      "post": {
        "summary": "获取用户群组",
        "description": "根据QQ号获取用户加入的所有群组",
        "operationId": "GuildService_ListUserGuilds",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ListUserGuildsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1ListUserGuildsRequest"
            }
          }
        ],
        "tags": [
          "GuildService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/guild/removeGuildMember": {
      "post": {
        "summary": "移除成员",
        "description": "从群组中移除用户",
        "operationId": "GuildService_RemoveGuildMember",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1RemoveGuildMemberResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1RemoveGuildMemberRequest"
            }
          }
        ],
        "tags": [
          "GuildService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/guild/updateGuildInfo": {
      "post": {
        "summary": "更新群组信息",
        "description": "更新群组基本信息",
        "operationId": "GuildService_UpdateGuildInfo",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1UpdateGuildInfoResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1UpdateGuildInfoRequest"
            }
          }
        ],
        "tags": [
          "GuildService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/guild/updateGuildMember": {
      "post": {
        "summary": "更新成员信息",
        "description": "修改成员角色或群昵称",
        "operationId": "GuildService_UpdateGuildMember",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1UpdateGuildMemberResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1UpdateGuildMemberRequest"
            }
          }
        ],
        "tags": [
          "GuildService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/user/changePassword": {
      "post": {
        "summary": "修改密码",
        "description": "修改密码",
        "operationId": "UserService_ChangePassword",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ChangePasswordResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1ChangePasswordRequest"
            }
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/api/v1/user/getUserInfo": {
      "post": {
        "summary": "获取用户信息",
        "description": "获取用户信息",
        "operationId": "UserService_GetUserInfo",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetUserInfoResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1GetUserInfoRequest"
            }
          }
        ],
        "tags": [
          "UserService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/user/updateUserInfo": {
      "post": {
        "summary": "更新用户信息",
        "description": "更新用户信息",
        "operationId": "UserService_UpdateUserInfo",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1UpdateUserInfoResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1UpdateUserInfoRequest"
            }
          }
        ],
        "tags": [
          "UserService"
        ],
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    }
  },
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1AddGuildMemberRequest": {
      "type": "object",
      "properties": {
        "guildId": {
          "type": "integer",
          "format": "uint64"
        },
        "userId": {
          "type": "integer",
          "format": "uint64"
        },
        "role": {
          "type": "string"
        },
        "groupNickname": {
          "type": "string"
        }
      },
      "title": "添加成员请求"
    },
    "v1AddGuildMemberResponse": {
      "type": "object",
      "properties": {
        "memberInfo": {
          "$ref": "#/definitions/v1GuildMemberInfo"
        }
      },
      "title": "添加成员响应"
    },
    "v1ChangePasswordRequest": {
      "type": "object",
      "properties": {
        "userId": {
          "type": "integer",
          "format": "uint64"
        },
        "qqNumber": {
          "type": "string"
        },
        "oldPassword": {
          "type": "string"
        },
        "newPassword": {
          "type": "string"
        }
      },
      "title": "修改密码请求"
    },
    "v1ChangePasswordResponse": {
      "type": "object",
      "title": "修改密码响应"
    },
    "v1CreateGuildRequest": {
      "type": "object",
      "properties": {
        "guildQqNumber": {
          "type": "string"
        },
        "ukey": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "server": {
          "type": "string"
        },
        "avatar": {
          "type": "string"
        },
        "expireTime": {
          "type": "integer",
          "format": "uint64"
        },
        "preferences": {
          "type": "string"
        }
      },
      "title": "创建群组请求"
    },
    "v1CreateGuildResponse": {
      "type": "object",
      "properties": {
        "guildInfo": {
          "$ref": "#/definitions/v1GuildInfo"
        }
      },
      "title": "创建群组响应"
    },
    "v1DeleteGuildRequest": {
      "type": "object",
      "properties": {
        "guildId": {
          "type": "integer",
          "format": "uint64"
        }
      },
      "title": "删除群组请求"
    },
    "v1DeleteGuildResponse": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean"
        }
      },
      "title": "删除群组响应"
    },
    "v1GetGuildInfoRequest": {
      "type": "object",
      "properties": {
        "guildId": {
          "type": "integer",
          "format": "uint64"
        }
      },
      "title": "获取群组信息请求"
    },
    "v1GetGuildInfoResponse": {
      "type": "object",
      "properties": {
        "guildInfo": {
          "$ref": "#/definitions/v1GuildInfo"
        }
      },
      "title": "获取群组信息响应"
    },
    "v1GetGuildMemberRequest": {
      "type": "object",
      "properties": {
        "guildId": {
          "type": "integer",
          "format": "uint64"
        },
        "userId": {
          "type": "integer",
          "format": "uint64"
        }
      },
      "title": "获取成员请求"
    },
    "v1GetGuildMemberResponse": {
      "type": "object",
      "properties": {
        "memberInfo": {
          "$ref": "#/definitions/v1GuildMemberInfo"
        }
      },
      "title": "获取成员响应"
    },
    "v1GetUserInfoRequest": {
      "type": "object",
      "title": "获取用户信息请求"
    },
    "v1GetUserInfoResponse": {
      "type": "object",
      "properties": {
        "userId": {
          "type": "integer",
          "format": "uint64"
        },
        "qqNumber": {
          "type": "string"
        },
        "nickname": {
          "type": "string"
        },
        "avatar": {
          "type": "string"
        },
        "isAdmin": {
          "type": "boolean"
        }
      },
      "title": "获取用户信息响应"
    },
    "v1GuildInfo": {
      "type": "object",
      "properties": {
        "guildId": {
          "type": "integer",
          "format": "uint64"
        },
        "guildQqNumber": {
          "type": "string"
        },
        "ukey": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "server": {
          "type": "string"
        },
        "avatar": {
          "type": "string"
        },
        "expireTime": {
          "type": "integer",
          "format": "uint64"
        },
        "preferences": {
          "type": "string"
        }
      },
      "title": "群组基本信息"
    },
    "v1GuildMemberInfo": {
      "type": "object",
      "properties": {
        "userId": {
          "type": "integer",
          "format": "uint64"
        },
        "qqNumber": {
          "type": "string"
        },
        "groupRole": {
          "type": "string"
        },
        "groupNickname": {
          "type": "string",
          "title": "群昵称"
        },
        "nickname": {
          "type": "string",
          "title": "用户昵称"
        }
      },
      "title": "成员基本信息"
    },
    "v1ListAllGuildsRequest": {
      "type": "object",
      "title": "获取所有群组请求"
    },
    "v1ListAllGuildsResponse": {
      "type": "object",
      "properties": {
        "guilds": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1GuildInfo"
          }
        }
      },
      "title": "获取所有群组响应"
    },
    "v1ListGuildMembersRequest": {
      "type": "object",
      "properties": {
        "guildId": {
          "type": "integer",
          "format": "uint64"
        }
      },
      "title": "获取群组成员请求"
    },
    "v1ListGuildMembersResponse": {
      "type": "object",
      "properties": {
        "members": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1GuildMemberInfo"
          }
        }
      },
      "title": "获取群组成员响应"
    },
    "v1ListUserGuildsRequest": {
      "type": "object",
      "properties": {
        "userId": {
          "type": "integer",
          "format": "uint64"
        }
      },
      "title": "用户群组列表请求"
    },
    "v1ListUserGuildsResponse": {
      "type": "object",
      "properties": {
        "guilds": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1GuildInfo"
          }
        }
      },
      "title": "获取用户群组响应"
    },
    "v1LoginRequest": {
      "type": "object",
      "properties": {
        "qqNumber": {
          "type": "string"
        },
        "password": {
          "type": "string"
        }
      },
      "title": "登录请求"
    },
    "v1LoginResponse": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string"
        },
        "userId": {
          "type": "integer",
          "format": "uint64"
        },
        "qqNumber": {
          "type": "string"
        },
        "nickname": {
          "type": "string"
        },
        "avatar": {
          "type": "string"
        }
      },
      "title": "登录响应"
    },
    "v1LogoutRequest": {
      "type": "object",
      "properties": {
        "userId": {
          "type": "integer",
          "format": "uint64"
        }
      },
      "title": "登出请求"
    },
    "v1LogoutResponse": {
      "type": "object",
      "title": "登出响应"
    },
    "v1RegisterRequest": {
      "type": "object",
      "properties": {
        "qqNumber": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "nickname": {
          "type": "string"
        }
      },
      "title": "注册请求"
    },
    "v1RegisterResponse": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string"
        },
        "userId": {
          "type": "integer",
          "format": "uint64"
        },
        "qqNumber": {
          "type": "string"
        },
        "nickname": {
          "type": "string"
        },
        "avatar": {
          "type": "string"
        }
      },
      "title": "注册响应"
    },
    "v1RemoveGuildMemberRequest": {
      "type": "object",
      "properties": {
        "guildId": {
          "type": "integer",
          "format": "uint64"
        },
        "userId": {
          "type": "integer",
          "format": "uint64"
        }
      },
      "title": "移除成员请求"
    },
    "v1RemoveGuildMemberResponse": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean"
        }
      },
      "title": "移除成员响应"
    },
    "v1UpdateGuildInfoRequest": {
      "type": "object",
      "properties": {
        "guildId": {
          "type": "integer",
          "format": "uint64"
        },
        "ukey": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "server": {
          "type": "string"
        },
        "avatar": {
          "type": "string"
        },
        "expireTime": {
          "type": "integer",
          "format": "uint64"
        },
        "preferences": {
          "type": "string"
        }
      },
      "title": "更新群组请求"
    },
    "v1UpdateGuildInfoResponse": {
      "type": "object",
      "properties": {
        "guildInfo": {
          "$ref": "#/definitions/v1GuildInfo"
        }
      },
      "title": "更新群组响应"
    },
    "v1UpdateGuildMemberRequest": {
      "type": "object",
      "properties": {
        "guildId": {
          "type": "integer",
          "format": "uint64"
        },
        "userId": {
          "type": "integer",
          "format": "uint64"
        },
        "role": {
          "type": "string"
        },
        "groupNickname": {
          "type": "string"
        }
      },
      "title": "更新成员请求"
    },
    "v1UpdateGuildMemberResponse": {
      "type": "object",
      "properties": {
        "memberInfo": {
          "$ref": "#/definitions/v1GuildMemberInfo"
        }
      },
      "title": "更新成员响应"
    },
    "v1UpdateUserInfoRequest": {
      "type": "object",
      "properties": {
        "userId": {
          "type": "integer",
          "format": "uint64"
        },
        "qqNumber": {
          "type": "string"
        },
        "nickname": {
          "type": "string"
        },
        "avatar": {
          "type": "string"
        }
      },
      "title": "更新用户信息请求"
    },
    "v1UpdateUserInfoResponse": {
      "type": "object",
      "title": "更新用户信息响应"
    }
  },
  "securityDefinitions": {
    "BearerAuth": {
      "type": "apiKey",
      "description": "Input a \"Bearer your-jwt-token\" to Value",
      "name": "Authorization",
      "in": "header"
    }
  }
}
